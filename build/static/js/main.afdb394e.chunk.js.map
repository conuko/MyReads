{"version":3,"sources":["utils/BooksAPI.js","components/BookShelfChanger.js","components/Book.js","components/BookShelf.js","components/Library.js","components/SearchBooks.js","components/SearchButton.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","search","query","fetch","method","body","JSON","stringify","then","res","json","data","books","BookShelfChanger","props","book","onSelectShelf","currentBookShelf","forEach","item","id","shelf","className","value","onChange","event","target","disabled","Book","alt","style","width","height","src","imageLinks","thumbnail","title","authors","join","BookShelf","bookShelf","booksOnTheShelf","filter","name","map","Library","bookShelfs","SearchBooks","useState","filteredBooks","setFilteredBooks","setQuery","error","setError","useEffect","a","BooksAPI","length","fetchData","Link","to","type","placeholder","SearchButton","Route","exact","path","render","BooksApp","setBooks","newBook","b","concat","ReactDOM","BrowserRouter","document","getElementById"],"mappings":"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","file":"static/js/main.afdb394e.chunk.js","sourcesContent":["\r\nconst api = \"https://reactnd-books-api.udacity.com\"\r\n\r\n\r\n// Generate a unique token for storing your bookshelf data on the backend server.\r\nlet token = localStorage.token\r\nif (!token)\r\n  token = localStorage.token = Math.random().toString(36).substr(-8)\r\n\r\nconst headers = {\r\n  'Accept': 'application/json',\r\n  'Authorization': token\r\n}\r\n\r\nexport const get = (bookId) =>\r\n  fetch(`${api}/books/${bookId}`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.book)\r\n\r\nexport const getAll = () =>\r\n  fetch(`${api}/books`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.books)\r\n\r\nexport const update = (book, shelf) =>\r\n  fetch(`${api}/books/${book.id}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ shelf })\r\n  }).then(res => res.json())\r\n\r\nexport const search = (query) =>\r\n  fetch(`${api}/search`, {\r\n    method: 'POST',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ query })\r\n  }).then(res => res.json())\r\n    .then(data => data.books)\r\n","import React from 'react'\r\n\r\nconst BookShelfChanger = (props) => {\r\n    const { book, books, onSelectShelf } = props;\r\n    \r\n    const handleChange = event => {\r\n        const { value } = event.target\r\n        /*\r\n        Call the callback function that was passed to this component from App.js \r\n        with the book props and the book.shelf value selected by the user.\r\n        This callback allows the child component BookShelfChanger to pass data\r\n        back to the parent component App.js:\r\n        */\r\n        onSelectShelf(book, value);\r\n    };\r\n\r\n    /*\r\n    When a book that is already on the bookshelf appears on the search page, it should have the same state.\r\n    E.g if it is set to the 'Currently Reading' shelf then it should also have that option\r\n    on the search page. Otherwise it should be set to 'None':\r\n    */\r\n    let currentBookShelf;\r\n    books.forEach((item) => {\r\n        // check, if a book (item) is on a shelf (book --> \"book\" are the books that are on a shelf)\r\n        if (item.id === book.id) {\r\n            /*\r\n            if the checked book is already on a shelf, the status of the currentBookShelf of the book\r\n            is set to the the name of the shelf, e.g 'currently reading':\r\n            */\r\n            currentBookShelf = item.shelf;\r\n        };\r\n    });\r\n\r\n    return (\r\n        <div className=\"book-shelf-changer\">\r\n            <select value={currentBookShelf ? currentBookShelf : \"none\"} onChange={handleChange}>\r\n                <option value=\"move\" disabled>Move to...</option>\r\n                <option value=\"currentlyReading\">Currently Reading</option>\r\n                <option value=\"wantToRead\">Want to Read</option>\r\n                <option value=\"read\">Read</option>\r\n                <option value=\"none\">None</option>\r\n            </select>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookShelfChanger;","import React from 'react';\r\nimport BookShelfChanger from './BookShelfChanger';\r\n\r\nconst Book = props => {\r\n    const { books, book, onSelectShelf } = props;\r\n    return (\r\n        <li>\r\n            <div className=\"book\">\r\n                <div className=\"book-top\">\r\n                    <img \r\n                        className=\"book-cover\"\r\n                        alt=\"book-cover\"\r\n                        style={{ width: 128, height: 193 }}\r\n                        src={ book.imageLinks?.thumbnail ?? '' }\r\n                    /> \r\n                    <BookShelfChanger \r\n                        books={books}\r\n                        book={book}\r\n                        onSelectShelf={onSelectShelf}\r\n                    />\r\n                </div>\r\n            <div className=\"book-title\">{book.title}</div>\r\n            <div className=\"book-authors\">{book.authors && book.authors.join(', ')}</div>\r\n            </div>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Book;","import React from 'react';\r\nimport Book from './Book';\r\n\r\nconst BookShelf = props => {\r\n    const { books, bookShelf, onSelectShelf } = props;\r\n    /*\r\n    create the booksOnTheShelf constant to filter \r\n    only the books that belong to a particular shelf:\r\n    */\r\n    const booksOnTheShelf = books.filter((book) => book.shelf === bookShelf.id);\r\n\r\n    /* \r\n    Map over the \"books\" props to render every single book with the Book Component\r\n    and pass the Book Component \"books\", \"book\" and \"selectShelf\" as Props\r\n    */\r\n    return (\r\n        <div className=\"bookshelf\">\r\n            <h2 className=\"bookshelf-title\">{bookShelf.name}</h2>\r\n            <div className=\"bookshelf-books\">\r\n                <ol className=\"books-grid\">\r\n                    {booksOnTheShelf.map(book => {\r\n                        return (\r\n                            <Book key={book.id}\r\n                                books={books}\r\n                                book={book}\r\n                                onSelectShelf={onSelectShelf}\r\n                            />\r\n                        )\r\n                    })}\r\n                </ol>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookShelf;","import React from 'react';\r\nimport BookShelf from './BookShelf';\r\n\r\nconst Library = props => {\r\n    const { books, onSelectShelf, bookShelfs } = props;\r\n\r\n    /* \r\n    first: map over the bookShelfs object, imported as props from the App Component.\r\n    second: return a BookShelf Component for each of the three bookShelfs from the bookShelfs object.\r\n     */\r\n    return (\r\n        <div className=\"list-books\">\r\n            <div className=\"list-books-title\">\r\n              <h1>MyReads</h1>\r\n            </div>\r\n            <div className=\"list-books-content\">\r\n                {bookShelfs.map((bookShelf) => {\r\n                    return(\r\n                        <BookShelf key={bookShelf.id}\r\n                            books={books}\r\n                            bookShelf={bookShelf}\r\n                            onSelectShelf={onSelectShelf}\r\n                        />\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Library;","import React, { useState, useEffect } from 'react'\r\nimport * as BooksAPI from '../utils/BooksAPI';\r\nimport Book from './Book';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst SearchBooks = (props) => {\r\n    const { books, onSelectShelf } = props;\r\n    const [filteredBooks, setFilteredBooks] = useState([]);\r\n    const [query, setQuery] = useState('');\r\n    const [error, setError] = useState(false);\r\n\r\n    /* \r\n    Method to update the query state with the onChange input,\r\n    given by the user:\r\n    */\r\n   const updateQuery = event => {\r\n    setQuery(event.target.value);\r\n    };\r\n\r\n    /* \r\n    I wrap the functionality of fetching data into a useEffect Lifecycle hook\r\n    to fix the error, that my search results still show even if I deleted the\r\n    search text inside the query state:\r\n    */\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            setError(false);\r\n            try {\r\n                if (query) {\r\n                    BooksAPI.search(query)\r\n                        .then((data) => {\r\n                            if (data.length > 0) {\r\n                                setFilteredBooks(data);\r\n                                setError(false);\r\n                            } else {\r\n                                setFilteredBooks([]);\r\n                                setError(true);\r\n                            }\r\n                        })\r\n                    } else {\r\n                        setFilteredBooks([]);\r\n                        setError(false);\r\n                    }\r\n                } catch (error) {\r\n                    setError(true);\r\n                }\r\n            };\r\n            fetchData();\r\n        }, [query]);\r\n\r\n    return(\r\n        <div className=\"search-books\">\r\n            <div className=\"search-books-bar\">\r\n                <Link to=\"/\">\r\n                        <button type=\"button\" className=\"close-search\">\r\n                        Close\r\n                        </button>   \r\n                </Link>\r\n                <div className=\"search-books-input-wrapper\">\r\n                    <input \r\n                        type=\"text\"\r\n                        placeholder=\"Search by title or author\"\r\n                        value={query}\r\n                        onChange={updateQuery}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"search-books-results\">\r\n                { filteredBooks.length > 0 && (\r\n                    <div>\r\n                        <ol className=\"books-grid\">\r\n                        {filteredBooks.map((book) => (\r\n                                <Book key={book.id}\r\n                                    books={books}\r\n                                    book={book}\r\n                                    onSelectShelf={onSelectShelf}\r\n                                />\r\n                            ))}\r\n                        </ol>\r\n                    </div>\r\n                )}\r\n                { error && (\r\n                    <h3 className=\"error-message\">No books found. Please try again!</h3>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SearchBooks;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Route } from 'react-router-dom';\r\n\r\nconst SearchButton = () => {\r\n\r\n    return(\r\n        <Route exact path=\"/\" render={() => (\r\n        <div className=\"open-search\">\r\n            <Link to=\"/search\">\r\n              <button type=\"button\">\r\n                Add a book\r\n              </button>\r\n            </Link>\r\n        </div>\r\n        )}/>\r\n    );\r\n}\r\n\r\nexport default SearchButton;","import React, { useState, useEffect } from 'react'\r\nimport * as BooksAPI from './utils/BooksAPI'\r\nimport './App.css'\r\nimport Library from './components/Library';\r\nimport SearchBooks from './components/SearchBooks';\r\nimport SearchButton from './components/SearchButton';\r\nimport { Route } from 'react-router-dom';\r\n\r\n/*     \r\ncreate an array for the 3 different shelfes with their id and name:\r\n*/\r\nconst bookShelfs = [\r\n  { \r\n      id: \"currentlyReading\",\r\n      name: \"Currently Reading\"\r\n  },\r\n  { \r\n      id: \"wantToRead\",\r\n      name: \"Want to Read\"\r\n  },\r\n  { \r\n      id:\"read\", \r\n      name: \"Read\"\r\n  }\r\n];\r\n\r\nconst BooksApp = () => {\r\n  const [books, setBooks] = useState([]);\r\n  \r\n  /* \r\n  set the initial state with the getAll method from the BooksAPI inside the\r\n  useEffect lifecycle hook:\r\n  */\r\n  useEffect(() => {\r\n      BooksAPI.getAll()\r\n        .then((data) => {\r\n          setBooks((data));\r\n        })\r\n  },[]);\r\n\r\n  /* \r\n  this callback method is used to move a book from one shelf to another with the\r\n  select options from BookShelfChanger Component and the update method from\r\n  the BooksAPI:\r\n  */\r\n  const onSelectShelf = async (newBook, value) => {\r\n    await BooksAPI.update(newBook, value)\r\n      .then(() => {\r\n        /*\r\n        update the shelf property of the BooksAPI (newBook) with the selected value (this value was updated as an \r\n        event in the BookShelfChanger and then passed back):\r\n        */\r\n        newBook.shelf = value;\r\n        /*\r\n        update the state with newBook and filter out the book (if it's there). The concat will add the book\r\n        to the end of the array:\r\n        */\r\n        setBooks(books.filter((b) => (b.id !== newBook.id)).concat(newBook));\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <div>\r\n        <Route exact path=\"/\" render={() => (\r\n            <Library\r\n              books={books}\r\n              onSelectShelf={onSelectShelf}\r\n              bookShelfs={bookShelfs}\r\n            />\r\n        )} />\r\n        <SearchButton />\r\n      </div>\r\n      <div>\r\n        <Route path=\"/search\" render={() => (\r\n            <SearchBooks\r\n              books={books}\r\n              onSelectShelf={onSelectShelf}\r\n            />\r\n        )} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BooksApp","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nReactDOM.render(\r\n    <BrowserRouter>\r\n        <App />\r\n    </BrowserRouter>, document.getElementById('root'));\r\n"],"sourceRoot":""}